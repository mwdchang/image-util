var it=Object.defineProperty;var y=(t,a)=>{for(var h in a)it(t,h,{get:a[h],enumerable:!0})};var j={};y(j,{uniformBlur:()=>mt});var ut=t=>t.data.length/t.width/t.height;var P=(t,a)=>{let h=t.data.length,n=new Uint8ClampedArray(h);for(let d=0;d<h;d+=4){let e=d/4,s=a({r:t.data[d+0],g:t.data[d+1],b:t.data[d+2],a:t.data[d+3],x:e%t.width,y:Math.floor(e/t.height)});n[d+0]=s.r,n[d+1]=s.g,n[d+2]=s.b,n[d+3]=s.a}return new ImageData(n,t.width,t.height)};var S=(t,a)=>{let{width:h,height:n,data:d}=t,e=ut(t),s=T(Array.from(d),h,n,e,a);return new ImageData(new Uint8ClampedArray(s),h,n)},T=(t,a,h,n,d)=>{let e=Math.round(Math.sqrt(d.length)),s=Math.floor(e/2),r=a,i=h,o=r,c=i,l=[],u=1/d.length*.28;for(let m=0;m<c;m++)for(let b=0;b<o;b++){let g=[];for(let f=0;f<n;f++)g.push(0);for(let f=0;f<e;f++)for(let p=0;p<e;p++){let I=m+f-s,w=b+p-s;if(I>=0&&I<i&&w>=0&&w<r){let x=(I*r+w)*n,D=d[f*e+p];for(let M=0;M<n;M++)g[M]+=t[x+M]*D}else for(let x=0;x<n;x++)g[x]+=t[(m*o+b)*n]*u}for(let f=0;f<n;f++)l.push(g[f])}return l},A=(t,a)=>{let h=t.width,n=t.height,d=4,e=[];for(let s=0;s<n;s++)for(let r=0;r<h;r++){let i=d*(s*h+r),o=t.data[i+0],c=t.data[i+1],l=t.data[i+2],u=t.data[i+3],m=o*a[0]+c*a[1]+l*a[2],b=o*a[3]+c*a[4]+l*a[5],g=o*a[6]+c*a[7]+l*a[8];e.push(m),e.push(b),e.push(g),e.push(u)}return new ImageData(new Uint8ClampedArray(e),h,n)},ot=(t,a,h)=>{let n=Math.max(t,a,h),d=Math.min(t,a,h),e=n-d,s=0;e!==0&&(n===t?s=((a-h)/e+(a<h?6:0))/6:n===a?s=((h-t)/e+2)/6:s=((t-a)/e+4)/6);let r=n===0?0:e/n;return{h:s,s:r,v:n}},k=(t,a,h)=>{let{width:n,height:d,data:e}=t;if(e.length/n/d!==4)throw new Error("Only support rgba channels currently...");let r=Math.max(0,Math.min(n-1,a)),i=Math.max(0,Math.min(d-1,h)),o=Math.floor(r),c=Math.floor(i),l=Math.min(o+1,n-1),u=Math.min(c+1,d-1),m=r-o,b=i-c;function g(M,v){let F=(v*n+M)*4;return[e[F],e[F+1],e[F+2],e[F+3]]}let f=g(o,c),p=g(l,c),I=g(o,u),w=g(l,u),x=f.map((M,v)=>M*(1-m)+p[v]*m),D=I.map((M,v)=>M*(1-m)+w[v]*m);return x.map((M,v)=>M*(1-b)+D[v]*b)};var mt=(t,a)=>{let h=[],n=a*a;for(let d=0;d<n;d++)h.push(1/n);return S(t,h)};var Y={};y(Y,{colourSplash:()=>ft});var ft=(t,a)=>{let h=0;return P(t,n=>{let d=n.r,e=n.g,s=n.b,{h:r,s:i,v:o}=ot(d/255,e/255,s/255),c=!1;for(let l of a.bands){let u=r>=l.hueMin/360&&r<=l.hueMax/360,m=o<=l.valueMax;if(c=u&&m,c)break}if(c)return n;{let l=.299*d+.587*e+.114*s;return{r:l,g:l,b:l,a:n.a}}})};var N={};y(N,{browniFilter:()=>wt,kodakChromeFilter:()=>xt,nightVisionFilter:()=>Mt,polaroidFilter:()=>gt,sepiaFilter:()=>bt,technicolourFilter:()=>pt,vintageFilter:()=>It});var bt=t=>A(t,[.393,.7689999,.18899999,.349,.6859999,.16799999,.272,.5339999,.13099999]),gt=t=>A(t,[1.438,-.062,-.062,-.122,1.378,-.122,-.016,-.016,1.483]),pt=t=>A(t,[1.9125277891456083,-.8545344976951645,-.09155508482755585,-.3087833385928097,1.7658908555458428,-.10601743074722245,-.231103377548616,-.7501899197440212,1.847597816108189]),xt=t=>A(t,[1.1285582396593525,-.3967382283601348,-.03992559172921793,-.16404339962244616,1.0835251566291304,-.05498805115633132,-.16786010706155763,-.5603416277695248,1.6014850761964943]),wt=t=>A(t,[.5997023498159715,.34553243048391263,-.2708298674538042,-.037703249837783157,.8609577587992641,.15059552388459913,.24113635128153335,-.07441037908422492,.44972182064877153]),It=t=>A(t,[.6279345635605994,.3202183420819367,-.03965408211312453,.02578397704808868,.6441188644374771,.03259127616149294,.0466055556782719,-.0851232987247891,.5241648018700465]),Mt=t=>A(t,[.1,.4,.1,.2,.8,.2,.1,.4,.1]);var X={};y(X,{dodgeFilter:()=>Dt});var Dt=(t,a)=>{let h=[];for(let n=0;n<t.data.length;n++){let d=t.data[n]/(255-a.data[n]);d>1&&(d=1),h.push(d*255)}return new ImageData(new Uint8ClampedArray(h),t.width,t.height)};var E={};y(E,{embossFilter:()=>vt,laplacianFilter:()=>Ft,sharpenFilter:()=>yt,sobelFilter:()=>Ct});var q={};y(q,{greyScaleFilter:()=>B});var B=(t,a)=>{let h=t.width,n=t.height,d=4,e=new Uint8ClampedArray(h*n*d);for(let s=0;s<h*n;++s){let r=s*d;if(a){if(a.rFilter){let o=a.rFilter;if(t.data[r]>=o[0]&&t.data[r]<=o[1]){e[r]=t.data[r],e[r+1]=t.data[r+1],e[r+2]=t.data[r+2],e[r+3]=255;continue}}if(a.gFilter){let o=a.gFilter;if(t.data[r+1]>=o[0]&&t.data[r+1]<=o[1]){e[r]=t.data[r],e[r+1]=t.data[r+1],e[r+2]=t.data[r+2],e[r+3]=255;continue}}if(a.bFilter){let o=a.bFilter;if(t.data[r+2]>=o[0]&&t.data[r+2]<=o[1]){e[r]=t.data[r],e[r+1]=t.data[r+1],e[r+2]=t.data[r+2],e[r+3]=255;continue}}}let i=0;for(let o=0;o<d-1;o++)i+=t.data[r+o];i/=3;for(let o=0;o<d-1;o++)e[r+o]=i;e[r+d-1]=255}return new ImageData(new Uint8ClampedArray(e),h,n)};var yt=t=>S(t,[0,-1,0,-1,5,-1,0,-1,0]),vt=t=>{let a=B(t);return S(a,[-2,-1,0,-1,1,1,0,1,2])},Ft=t=>{let a=[-1,-1,-1,-1,8,-1,-1,-1,-1],h=[],n=B(t);for(let s=0;s<n.data.length;s++)s%4===0&&h.push(t.data[s]);let d=T(h,t.width,t.height,1,a),e=[];for(let s=0;s<d.length;s++)e.push(d[s]),e.push(d[s]),e.push(d[s]),e.push(255);return new ImageData(new Uint8ClampedArray(e),t.width,t.height)},Ct=t=>{let a=[-1,0,1,-2,0,2,-1,0,1],h=[-1,-2,-1,0,0,0,1,2,1],n=B(t),d=[];for(let i=0;i<n.data.length;i++)i%4===0&&d.push(n.data[i]);let e=T(d,t.width,t.height,1,a),s=T(d,t.width,t.height,1,h),r=[];for(let i=0;i<e.length;i++){let o=Math.sqrt(e[i]*e[i]+s[i]*s[i]);r.push(Math.min(255,o)),r.push(Math.min(255,o)),r.push(Math.min(255,o)),r.push(255)}return new ImageData(new Uint8ClampedArray(r),t.width,t.height)};var G={};y(G,{fishEyeFilter:()=>At});var At=(t,a,h,n,d)=>{let e=t.width,s=t.height,r=4,i=[];for(let o=0;o<s;o++)for(let c=0;c<e;c++){let l=c-a,u=o-h,m=Math.sqrt(l*l+u*u);if(m<n){let b=Math.floor(a+l*d*m),g=Math.floor(h+u*d*m),f=r*(g*e+b);i.push(t.data[f]),i.push(t.data[f+1]),i.push(t.data[f+2]),i.push(255)}else{let b=r*(o*e+c);i.push(t.data[b]),i.push(t.data[b+1]),i.push(t.data[b+2]),i.push(t.data[b+3])}}return new ImageData(new Uint8ClampedArray(i),t.width,t.height)};var H={};y(H,{gaussianBlur:()=>$});var kt=[67e-8,2292e-8,19117e-8,38771e-8,19117e-8,2292e-8,67e-8,2292e-8,78633e-8,.00655965,.01330373,.00655965,78633e-8,2292e-8,19117e-8,.00655965,.05472157,.11098164,.05472157,.00655965,19117e-8,38771e-8,.01330373,.11098164,.22508352,.11098164,.01330373,38771e-8,19117e-8,.00655965,.05472157,.11098164,.05472157,.00655965,19117e-8,2292e-8,78633e-8,.00655965,.01330373,.00655965,78633e-8,2292e-8,67e-8,2292e-8,19117e-8,38771e-8,19117e-8,2292e-8,67e-8],$=t=>S(t,kt);var L={};y(L,{glowFilter:()=>St});var St=t=>{let a=$(t);a=B(a);let h=[];for(let n=0;n<t.data.length;n++)if(n%4!==3){let d=Math.min(255,.5*a.data[n]+.9*t.data[n]);h.push(d)}else h.push(255);return new ImageData(new Uint8ClampedArray(h),t.width,t.height)};var V={};y(V,{gridFilter:()=>Bt});var Bt=(t,a,h)=>{let n=t.width,d=t.height,e=4,s=[];for(let r=0;r<d;r++)for(let i=0;i<n;i++){let o=e*(r*n+i);r%a<h||i%a<h?(s.push(255),s.push(255),s.push(255),s.push(255)):(s.push(t.data[o+0]),s.push(t.data[o+1]),s.push(t.data[o+2]),s.push(255))}return new ImageData(new Uint8ClampedArray(s),t.width,t.height)};var K={};y(K,{halftoneFilter:()=>Ut});var Ot=(t,a,h)=>`rgb(${t},${a},${h})`,Tt=(t,a,h,n)=>{let{width:d,data:e}=t,s=n.kernel,r=s*s,i=0,o=0,c=0;for(let g=h;g<h+s;g++)for(let f=a;f<a+s;f++){let p=(g*d+f)*4;i+=e[p]||0,o+=e[p+1]||0,c+=e[p+2]||0}let l=(n.rWeight*i+n.gWeight*o+n.bWeight*c)/(255*r),u=i/r,m=o/r,b=c/r;return{v:l,avgR:u,avgG:m,avgB:b}},Ut=(t,a)=>{let h=a.kernel,n=t.width,d=t.height;a.rWeight||(a.rWeight=.2),a.gWeight||(a.gWeight=.2),a.bWeight||(a.bWeight=.2);let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let s=e.getContext("2d"),r=(h-1)*.5;for(let i=0;i<=d-h;i+=h)for(let o=0;o<=n-h;o+=h){let{v:c,avgR:l,avgG:u,avgB:m}=Tt(t,o,i,a),b=h/2*(1-c),g=0;a.shiftYAmt&&a.shiftYStride&&(g=o%(a.shiftYStride*h)===0?0:a.shiftYAmt);let f=0;a.shiftXAmt&&a.shiftXStride&&(g=o%(a.shiftXStride*h)===0?0:a.shiftXAmt),s.beginPath(),s.fillStyle=Ot(l,u,m),s.ellipse(f+o+r,g+i+r,b,b,0,0,2*Math.PI),s.fill(),s.closePath()}return s.getImageData(0,0,n,d)};var J={};y(J,{hatchFilter:()=>Pt});var Wt=(t,a,h)=>(t*.299+a*.587+h*.114)/255,Pt=(t,a,h,n,d)=>{let e=t.width,s=t.height,r=4,i=[],o=10;for(let c=0;c<s;c++)for(let l=0;l<e;l++){let u=r*(c*e+l),m=t.data[u+0],b=t.data[u+1],g=t.data[u+2],f=Wt(m,b,g),p=245,I=245,w=245,x=6;f<a&&(l+c)%x===0&&(p=4*o,I=4*o,w=4*o),f<h&&(l-c)%x===0&&(p=4*o,I=4*o,w=4*o),f<n&&(l+c-5)%x===0&&(p=4*o,I=4*o,w=4*o),f<d&&(l-c-5)%x===0&&(p=8*o,I=8*o,w=8*o),i.push(p),i.push(I),i.push(w),i.push(255)}return new ImageData(new Uint8ClampedArray(i),t.width,t.height)};var Q={};y(Q,{invertFilter:()=>Rt});var Rt=t=>P(t,a=>({r:255-a.r,g:255-a.g,b:255-a.b,a:a.a}));var Z={};y(Z,{kaleidoscopeFilter:()=>jt});var jt=(t,a,h,n=6)=>{let{width:d,height:e}=t,s=new ImageData(d,e),r=2*Math.PI/n;for(let i=0;i<e;i++)for(let o=0;o<d;o++){let c=o-a,l=i-h,u=Math.atan2(l,c),m=Math.sqrt(c*c+l*l);u=u%r,u=Math.abs(u-r/2);let b=a+m*Math.cos(u),g=h+m*Math.sin(u),f=k(t,b,g),p=(i*d+o)*4;s.data[p]=f[0],s.data[p+1]=f[1],s.data[p+2]=f[2],s.data[p+3]=f[3]}return s};var _={};y(_,{motionBlur:()=>Yt});var Yt=(t,a,h=20,n=24)=>{let{width:d,height:e}=t,s=new ImageData(d,e),r=Math.cos(a),i=Math.sin(a);for(let o=0;o<e;o++)for(let c=0;c<d;c++){let l=0,u=0,m=0,b=0;for(let f=0;f<n;f++){let p=f/(n-1)-.5,I=c+r*p*h,w=o+i*p*h,x=k(t,I,w);l+=x[0],u+=x[1],m+=x[2],b+=x[3]}let g=(o*d+c)*4;s.data[g]=l/n,s.data[g+1]=u/n,s.data[g+2]=m/n,s.data[g+3]=b/n}return s};var z={};y(z,{painterlyFilter:()=>Nt});var Nt=(t,a,h)=>{let n=t.width,d=t.height,e=4,s=new Uint8ClampedArray(t.data);for(let r=a;r<d-a;r++)for(let i=a;i<n-a;i++){let o=[],c=[],l=[],u=[];for(let f=0;f<h;f++)o.push(0),c.push(0),l.push(0),u.push(0);for(let f=-a;f<=a;f++)for(let p=-a;p<=a;p++){let I=e*((r+f)*n+(i+p)),w=t.data[I+0],x=t.data[I+1],D=t.data[I+2],M=Math.floor((w+x+D)/3*h/255);o[M]++,c[M]+=w,l[M]+=x,u[M]+=D}let m=0,b=0;for(let f=0;f<h;f++)o[f]>m&&(m=o[f],b=f);let g=e*(r*n+i);s[g+0]=c[b]/m,s[g+1]=l[b]/m,s[g+2]=u[b]/m}return new ImageData(s,n,d)};var tt={};y(tt,{radialSpinBlur:()=>Xt});var Xt=(t,a,h,n=.5,d=32)=>{let{width:e,height:s}=t,r=new ImageData(e,s);for(let i=0;i<s;i++)for(let o=0;o<e;o++){let c=0,l=0,u=0,m=0,b=o-a,g=i-h;for(let p=0;p<d;p++){let w=(p/(d-1)-.5)*n,x=Math.sin(w),D=Math.cos(w),M=a+(b*D-g*x),v=h+(b*x+g*D),F=k(t,M,v);c+=F[0],l+=F[1],u+=F[2],m+=F[3]}let f=(i*e+o)*4;r.data[f]=c/d,r.data[f+1]=l/d,r.data[f+2]=u/d,r.data[f+3]=m/d}return r};var et={};y(et,{hshear:()=>ct,shearFilter:()=>qt,vshear:()=>st});var st=(t,a,h)=>{let n=t.width,d=t.height,e=new ImageData(new Uint8ClampedArray(t.data),n,d),s=Math.floor(Math.random()*h),r=0,i=!1;for(let o=0;o<n;o++){if(r++,i){for(let c=0;c<d-s;c++){let l=4*(c*n+o),u=4*((c+s)*n+o);e.data[l]=t.data[u],e.data[l+1]=t.data[u+1],e.data[l+2]=t.data[u+2],e.data[l+3]=t.data[u+3]}for(let c=d-s;c<d;c++){let l=4*(c*n+o);e.data[l]=255,e.data[l+1]=255,e.data[l+2]=255,e.data[l+3]=255}}else{for(let c=0;c<s;c++){let l=4*(c*n+o);e.data[l]=255,e.data[l+1]=255,e.data[l+2]=255,e.data[l+3]=255}for(let c=s;c<d;c++){let l=4*(c*n+o),u=4*((c-s)*n+o);e.data[l]=t.data[u],e.data[l+1]=t.data[u+1],e.data[l+2]=t.data[u+2],e.data[l+3]=t.data[u+3]}}r==a&&(s=Math.floor(Math.random()*h),i=!i,r=0)}return e},ct=(t,a,h)=>{let n=t.width,d=t.height,e=new ImageData(new Uint8ClampedArray(t.data),n,d),s=Math.floor(Math.random()*h),r=0,i=!1;for(let o=0;o<d;o++){if(r++,i){for(let c=0;c<n-s;c++){let l=4*(o*n+c),u=4*(o*n+c+s);e.data[l]=t.data[u],e.data[l+1]=t.data[u+1],e.data[l+2]=t.data[u+2],e.data[l+3]=t.data[u+3]}for(let c=n-s;c<n;c++){let l=4*(o*n+c);e.data[l]=255,e.data[l+1]=255,e.data[l+2]=255,e.data[l+3]=255}}else{for(let c=s;c<n;c++){let l=4*(o*n+c),u=4*(o*n+c-s);e.data[l]=t.data[u],e.data[l+1]=t.data[u+1],e.data[l+2]=t.data[u+2],e.data[l+3]=t.data[u+3]}for(let c=0;c<s;c++){let l=4*(o*n+c);e.data[l]=255,e.data[l+1]=255,e.data[l+2]=255,e.data[l+3]=255}}r==a&&(s=Math.floor(Math.random()*h),i=!i,r=0)}return e},qt=(t,a,h,n,d)=>{let e=ct(t,a,h);return st(e,n,d)};var at={};y(at,{sketchTransform:()=>Et});var Et=(t,a)=>{let h=t.width,n=t.height,d=t.data,e=new Set,s=[];for(let c=0;c<h;c++)for(let l=0;l<n;l++){let u=(c+l*h)*4,m=d[u]+":"+d[u+1]+":"+d[u+2];e.has(m)||(e.add(m),s.push([d[u+0],d[u+1],d[u+2]]))}let r={};for(;;){let c=a.levelSteps;r={};for(let u of s){let m=u[0],b=u[1],g=u[2],f=Math.round(m/255*(c-1)),p=Math.round(b/255*(c-1)),I=Math.round(g/255*(c-1));for(let w=-1;w<=1;w++)for(let x=-1;x<=1;x++)for(let D=-1;D<=1;D++){let M=f+w+":"+(p+x)+":"+(I+D);r[M]=!0}}if(Object.keys(r).length>NaN&&a.levelSteps>2){a.levelSteps--,console.log("Reducing to "+a.levelSteps+" RGB steps");continue}break}let{canvases:i,imageDatas:o}=$t(h,n,r,a);return Gt(t,o,a)},Gt=(t,a,h)=>{let n=t.width,d=t.height,e=t.data,s=[];for(let r=0;r<n;r++)for(let i=0;i<d;i++){let o=r+i*n;s[o*3]=e[o*4],s[o*3+1]=e[o*4+1],s[o*3+2]=e[o*4+2]}s=Vt(s,{width:n,height:d,blurAmount:h.edgeBlurAmount});for(let r=0;r<n;r++)for(let i=0;i<d;i++){let o=r+i*n,c=e[o*4],l=e[o*4+1],u=e[o*4+2],m=Ht(a,o,c,l,u,h.levelSteps);if(h.greyScale){let g=Math.round((m.red+m.green+m.blue)/3);m.red=m.green=m.blue=g}let b=Math.max(0,(255-s[r+i*n]*h.edgeAmount)/255);b=Math.min(1,Math.max(.5,b*b)),e[o*4]=Math.round(m.red*b),e[o*4+1]=Math.round(m.green*b),e[o*4+2]=Math.round(m.blue*b)}return t},$t=(t,a,h,n)=>{let d=performance.now(),e=n.levelSteps,s=[],r=[],i=n.lineThickness,o=n.lineLength,c=1-n.darkeningFactor,l=n.lineAlpha,u=n.lineDensity*2,m=n.lightness;for(let g=-1;g<=e;g++){s[g]={},r[g]={};for(let f=-1;f<=e;f++)s[g][f]={},r[g][f]={}}for(let g in h){let f=g.split(":"),p=parseInt(f[0]),I=parseInt(f[1]),w=parseInt(f[2]),x=255*p/(e-1),D=255*I/(e-1),M=255*w/(e-1);x=Math.min(255,Math.max(0,x)),D=Math.min(255,Math.max(0,D)),M=Math.min(255,Math.max(0,M));let v=1-Math.min(x,D,M)/255,F="";if(v>0){let C=Math.pow(1/v,1/m),O=Math.round((255-(255-x)*C)*c),R=Math.round((255-(255-D)*C)*c),dt=Math.round((255-(255-M)*C)*c);F=`rgb(${O}, ${R}, ${dt})`}else{let C=Math.round(x*c),O=Math.round(D*c),R=Math.round(M*c);F=`rgb(${C}, ${O}, ${R})`}let U=0,W=0;if(Math.abs(D-M)>.1||Math.abs(2*x-D-M)>.1){W=Math.atan2(Math.sqrt(3)*(D-M),2*x-D-M);let C=Math.max(255-x,255-D,255-M),O=Math.min(255-x,255-D,255-M);U=(C-O)/C,U==0&&(W=Math.random()*Math.PI*2)}else W=0,U=0;let ht=Math.PI*(.1+.9*Math.pow(1-U,3)),rt=Lt(t,a,W/2+Math.PI*.3,ht,i,o,v*u,F,l);s[p][I][w]=rt,r[p][I][w]=rt.getContext("2d").getImageData(0,0,t,a)}let b=performance.now();return console.log("create textures....",b-d),{canvases:s,imageDatas:r}},Ht=(t,a,h,n,d,e)=>{a*=4;let s=h/255*(e-1),r=n/255*(e-1),i=d/255*(e-1),o=s,c=r,l=i;s=Math.round(s),r=Math.round(r),i=Math.round(i);let u=0;for(let p=-1;p<=1;p++)for(let I=-1;I<=1;I++)for(let w=-1;w<=1;w++){let x=(.75-Math.abs(s+p-o)/2)*(.75-Math.abs(r+I-c)/2)*(.75-Math.abs(i+w-l)/2);if(x<0)throw new Error("debug");u+=x}let m=0,b=0,g=0;for(let p=-1;p<=1;p++)for(let I=-1;I<=1;I++)for(let w=-1;w<=1;w++){let x=(.75-Math.abs(s+p-o)/2)*(.75-Math.abs(r+I-c)/2)*(.75-Math.abs(i+w-l)/2);x/=u;let D=t[s+p][r+I][i+w];if(D==null)throw new Error("debug me!");m+=D.data[a]*x,b+=D.data[a+1]*x,g+=D.data[a+2]*x}let f=1-(1-(e+1)/e)*.25;return{red:Math.min(255,Math.round(m*f)),green:Math.min(255,Math.round(b*f)),blue:Math.min(255,Math.round(g*f))}},Lt=(t,a,h,n,d,e,s,r,i)=>{let o=s*t*a/e/d/i,c=document.createElement("canvas");c.width=t,c.height=a;let l=c.getContext("2d");l.strokeStyle=r,l.globalAlpha=1,l.fillStyle="#FFFFFF",l.fillRect(0,0,t,a),l.globalAlpha=i,l.lineWidth=d;for(let u=0;u<o;u++){let m=h+Math.round(Math.random()*2-1)/2*n,b=Math.random()*t,g=Math.random()*a,f=e/2*Math.cos(m),p=e/2*Math.sin(m),I=b+f,w=b-f,x=g+p,D=g-p;l.beginPath(),l.moveTo(I,x),l.lineTo(w,D),l.stroke()}return c},Vt=(t,a)=>{let h=a.width,n=a.height,d=a.blurAmount,e=[],s=[];for(let c=0;c<h;c++){let l=[0,0,0],u=[0,0,0];for(let m=0;m<n;m++){let b=c+m*h;l[0]+=t[b*3+0],l[1]+=t[b*3+1],l[2]+=t[b*3+2],u[0]+=t[b*3+0]*t[b*3+0],u[1]+=t[b*3+1]*t[b*3+1],u[2]+=t[b*3+2]*t[b*3+2],e[b]=l.slice(0),s[b]=u.slice(0)}}let r=[],i=[];for(let c=0;c<n;c++){let l=[0,0,0],u=[0,0,0];for(let m=0;m<h;m++){let b=m+c*h,g=m+Math.max(0,Math.round(c-d/2))*h,f=m+Math.min(n-1,Math.round(c+d/2))*h;l[0]+=(e[f][0]-e[g][0])/(f-g)*h,l[1]+=(e[f][1]-e[g][1])/(f-g)*h,l[2]+=(e[f][2]-e[g][2])/(f-g)*h,u[0]+=(s[f][0]-s[g][0])/(f-g)*h,u[1]+=(s[f][1]-s[g][1])/(f-g)*h,u[2]+=(s[f][2]-s[g][2])/(f-g)*h,r[b]=l.slice(0),i[b]=u.slice(0)}}let o=[];for(let c=0;c<h;c++)for(let l=0;l<n;l++){let u=c+l*h,m=Math.max(0,Math.round(c-d/2))+l*h,b=Math.min(h-1,Math.round(c+d/2))+l*h,g=(r[b][0]-r[m][0])/(b-m),f=(r[b][1]-r[m][1])/(b-m),p=(r[b][2]-r[m][2])/(b-m),I=(i[b][0]-i[m][0])/(b-m),w=(i[b][1]-i[m][1])/(b-m),x=(i[b][2]-i[m][2])/(b-m);o[u]=Math.sqrt(I+w+x-(g*g+f*f+p*p)),isNaN(o[u])&&(o[u]=0)}return o};var nt={};y(nt,{swirlFilter:()=>Kt});var Kt=(t,a,h,n,d)=>{let{width:e,height:s}=t,r=new ImageData(e,s);for(let i=0;i<s;i++)for(let o=0;o<e;o++){let c=o-a,l=i-h,u=Math.sqrt(c*c+l*l);if(u<n){let m=(n-u)/n,b=d*m,g=Math.sin(b),f=Math.cos(b),p=a+c*f-l*g,I=h+c*g+l*f,w=k(t,p,I),x=(i*e+o)*4;r.data[x]=w[0],r.data[x+1]=w[1],r.data[x+2]=w[2],r.data[x+3]=w[3]}else{let m=(i*e+o)*4,b=m;r.data[m]=t.data[b],r.data[m+1]=t.data[b+1],r.data[m+2]=t.data[b+2],r.data[m+3]=t.data[b+3]}}return r};var lt={...j,...Y,...N,...X,...E,...G,...H,...L,...q,...V,...K,...J,...Q,...Z,..._,...z,...tt,...et,...at,...nt};self.onmessage=t=>{let{id:a,filter:h,imageData:n,params:d}=t.data;if(console.log("[worker] started",d),h==="xyz"){console.log("I am done..."),self.postMessage({id:a,result:"done done"});return}if(lt[h]){let e=lt[h](n,...d);self.postMessage({id:a,result:e})}};
