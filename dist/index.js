var A=t=>t.data.length/t.width/t.height,q=async(t,e)=>{let n=new Image,a=document.createElement("canvas"),r=a.getContext("2d");return new Promise((s,h)=>{n.crossOrigin="",n.onerror=()=>{h(new Error("unable to load image"))},n.onload=()=>{n.width=e.width||n.naturalWidth,n.height=e.height||n.naturalHeight,a.width=n.width,a.height=n.height,r.drawImage(n,0,0,n.width,n.height);let o=r.getImageData(0,0,a.width,a.height);s(o)},n.src=t})},M=t=>{let e=t.width,n=t.height,a=4,r=new Uint8ClampedArray(e*n*a);for(let c=0;c<e*n;++c){let s=c*a,h=0;for(let o=0;o<a-1;o++)h+=t.data[s+o];h/=3;for(let o=0;o<a-1;o++)r[s+o]=h;r[s+a-1]=255}return new ImageData(new Uint8ClampedArray(r),e,n)},S=(t,e)=>{let n=t.width,a=4,r=[];for(let c=e.y;c<e.y+e.height;c++)for(let s=e.x;s<e.x+e.width;s++){let h=c*n*a+s*a;for(let o=0;o<a;o++)r.push(t.data[h+o])}return new ImageData(new Uint8ClampedArray(r),e.width,e.height)},k=(t,e)=>{if(t.data.length!==e.data.length)throw new Error("Bad dimension");let n=[];for(let a=0;a<t.data.length;a++){let r=Math.min(255,t.data[a]+e.data[a]);n.push(r)}return new ImageData(new Uint8ClampedArray(n),t.width,t.height)},B=t=>{let e=[];for(let n=0;n<t.data.length;n++)n%4!=3?e.push(255-t.data[n]):e.push(t.data[n]);return new ImageData(new Uint8ClampedArray(e),t.width,t.height)},E=(t,e)=>{let n=[];for(let a=0;a<t.data.length;a++){let r=t.data[a]/(255-e.data[a]);r>1&&(r=1),n.push(r*255)}return new ImageData(new Uint8ClampedArray(n),t.width,t.height)};var y=(t,e,n,a,r)=>{let c=Math.round(Math.sqrt(r.length)),s=Math.floor(c/2),h=e,o=n,l=h,m=o,u=[];for(let d=0;d<m;d++)for(let f=0;f<l;f++){let p=[];for(let w=0;w<a;w++)p.push(0);for(let w=0;w<c;w++)for(let i=0;i<c;i++){let I=d+w-s,D=f+i-s;if(I>=0&&I<o&&D>=0&&D<h){let g=(I*h+D)*a,x=r[w*c+i];for(let b=0;b<a;b++)p[b]+=t[g+b]*x}else for(let g=0;g<a;g++)p[g]+=t[(d*l+f)*a]*(1/r.length)*.28}for(let w=0;w<a;w++)u.push(p[w])}return u},v=(t,e)=>{let n=Math.round(Math.sqrt(e.length)),a=Math.floor(n/2),r=t.width,c=t.height,s=A(t),h=r,o=c,l=[];for(let m=0;m<o;m++)for(let u=0;u<h;u++){let d=[];for(let f=0;f<s;f++)d.push(0);for(let f=0;f<n;f++)for(let p=0;p<n;p++){let w=m+f-a,i=u+p-a;if(w>=0&&w<c&&i>=0&&i<r){let I=(w*r+i)*s,D=e[f*n+p];for(let g=0;g<s;g++)d[g]+=t.data[I+g]*D}else for(let I=0;I<s;I++)d[I]+=t.data[(m*h+u)*s]*(1/e.length)*.28}for(let f=0;f<s;f++)l.push(d[f])}return new ImageData(new Uint8ClampedArray(l),r,c)};var W=t=>{let e=M(t);return v(e,[-2,-1,0,-1,1,1,0,1,2])},J=t=>{let e=[-1,-1,-1,-1,8,-1,-1,-1,-1],n=[],a=M(t);for(let s=0;s<a.data.length;s++)s%4==0&&n.push(t.data[s]);let r=y(n,t.width,t.height,1,e),c=[];for(let s=0;s<r.length;s++)c.push(r[s]),c.push(r[s]),c.push(r[s]),c.push(255);return new ImageData(new Uint8ClampedArray(c),t.width,t.height)},K=t=>{let e=[-1,0,1,-2,0,2,-1,0,1],n=[-1,-2,-1,0,0,0,1,2,1],a=M(t),r=[];for(let o=0;o<a.data.length;o++)o%4==0&&r.push(a.data[o]);let c=y(r,t.width,t.height,1,e),s=y(r,t.width,t.height,1,n),h=[];for(let o=0;o<c.length;o++){let l=Math.sqrt(c[o]*c[o]+s[o]*s[o]);h.push(Math.min(255,l)),h.push(Math.min(255,l)),h.push(Math.min(255,l)),h.push(255)}return new ImageData(new Uint8ClampedArray(h),t.width,t.height)};var C=(t,e)=>{let n=t.width,a=t.height,r=4,c=[];console.log(t.data.length/n/a);for(let s=0;s<a;s++)for(let h=0;h<n;h++){let o=r*(s*n+h),l=t.data[o+0],m=t.data[o+1],u=t.data[o+2],d=t.data[o+3],f=l*e[0]+m*e[1]+u*e[2],p=l*e[3]+m*e[4]+u*e[5],w=l*e[6]+m*e[7]+u*e[8];c.push(f),c.push(p),c.push(w),c.push(d)}return new ImageData(new Uint8ClampedArray(c),n,a)},Q=t=>C(t,[.393,.7689999,.18899999,.349,.6859999,.16799999,.272,.5339999,.13099999]),T=t=>C(t,[1.438,-.062,-.062,-.122,1.378,-.122,-.016,-.016,1.483]),V=t=>C(t,[1.9125277891456083,-.8545344976951645,-.09155508482755585,-.3087833385928097,1.7658908555458428,-.10601743074722245,-.231103377548616,-.7501899197440212,1.847597816108189]),X=t=>C(t,[1.1285582396593525,-.3967382283601348,-.03992559172921793,-.16404339962244616,1.0835251566291304,-.05498805115633132,-.16786010706155763,-.5603416277695248,1.6014850761964943]),Y=t=>C(t,[.6279345635605994,.3202183420819367,-.03965408211312453,.02578397704808868,.6441188644374771,.03259127616149294,.0466055556782719,-.0851232987247891,.5241648018700465]);var F=[67e-8,2292e-8,19117e-8,38771e-8,19117e-8,2292e-8,67e-8,2292e-8,78633e-8,.00655965,.01330373,.00655965,78633e-8,2292e-8,19117e-8,.00655965,.05472157,.11098164,.05472157,.00655965,19117e-8,38771e-8,.01330373,.11098164,.22508352,.11098164,.01330373,38771e-8,19117e-8,.00655965,.05472157,.11098164,.05472157,.00655965,19117e-8,2292e-8,78633e-8,.00655965,.01330373,.00655965,78633e-8,2292e-8,67e-8,2292e-8,19117e-8,38771e-8,19117e-8,2292e-8,67e-8],O=t=>v(t,F),tt=(t,e)=>{let n=[],a=e*e;for(let r=0;r<a;r++)n.push(1/a);return v(t,n)},et=t=>{let e=O(t);e=M(e);let n=[];for(let a=0;a<t.data.length;a++)if(a%4!=3){let r=Math.min(255,.5*e.data[a]+.9*t.data[a]);n.push(r)}else n.push(255);return new ImageData(new Uint8ClampedArray(n),t.width,t.height)};var R=(t,e,n)=>(t*.299+e*.587+n*.114)/255,ot=t=>{let e=[],n=1,a=1;for(let r=0;r<t.data.length;r++)r%4==3?(n+=a,e.push(n),(n===0||n===255)&&(a*=-1)):e.push(t.data[r]);return new ImageData(new Uint8ClampedArray(e),t.width,t.height)},rt=t=>{let e=[];for(let h=0;h<t.data.length;h++)e.push(255);let n=4,a=t.width,r=t.height,c=h=>{let o=-200;for(let l=0;l<h;l++){let m=0,u=0,d=0;if(Math.random()>.2){let f=Math.random();f>.75?(u=Math.floor(a*Math.random()),d=Math.floor(r*Math.random()*.25)+.75*r):f>.5?(u=Math.floor(a*Math.random()),d=Math.floor(r*Math.random()*.25)):f>.25?(u=Math.floor(a*Math.random()*.25),d=Math.floor(r*Math.random())):(u=Math.floor(a*Math.random()*.25)+.75*a,d=Math.floor(r*Math.random()))}else u=.25*a+Math.random()*.8*a,d=.25*d+Math.random()*.8*d;m=n*(d*a+u),e[m+0]=o,e[m+1]=o,e[m+2]=o}};c(200),e=y(e,a,r,4,[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]),c(120),e=y(e,a,r,4,[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]);for(let h=0;h<4;h++){let o=Math.floor(t.width*Math.random()*.4),l=Math.floor(Math.random()*t.height*.05),m=Math.floor(Math.random()*t.height*.3);for(let u=l;u<t.height-m;u++){if(Math.random()<.15)continue;let d=n*(u*t.width+o);e[d+0]=150,e[d+1]=150,e[d+2]=150}}let s=[];for(let h=0;h<t.data.length;h++)h%4!=3?s.push(t.data[h]-(255-e[h])):s.push(t.data[h]*(.7+.3*Math.random()));return new ImageData(new Uint8ClampedArray(s),t.width,t.height)},st=(t,e,n)=>{let a=t.width,r=t.height,c=4,s=[];for(let h=0;h<r;h++)for(let o=0;o<a;o++){let l=c*(h*a+o);h%e<n||o%e<n?(s.push(255),s.push(255),s.push(255),s.push(255)):(s.push(t.data[l+0]),s.push(t.data[l+1]),s.push(t.data[l+2]),s.push(255))}return new ImageData(new Uint8ClampedArray(s),t.width,t.height)},ht=(t,e,n,a,r)=>{let c=t.width,s=t.height,h=4,o=[],l=10;for(let m=0;m<s;m++)for(let u=0;u<c;u++){let d=h*(m*c+u),f=t.data[d+0],p=t.data[d+1],w=t.data[d+2],i=R(f,p,w),I=245,D=245,g=245,x=6;i<e&&(u+m)%x==0&&(I=4*l,D=4*l,g=4*l),i<n&&(u-m)%x==0&&(I=4*l,D=4*l,g=4*l),i<a&&(u+m-5)%x==0&&(I=4*l,D=4*l,g=4*l),i<r&&(u-m-5)%x==0&&(I=8*l,D=8*l,g=8*l),o.push(I),o.push(D),o.push(g),o.push(255)}return new ImageData(new Uint8ClampedArray(o),t.width,t.height)},ct=(t,e,n,a,r)=>{let c=t.width,s=t.height,h=4,o=[];for(let l=0;l<s;l++)for(let m=0;m<c;m++){let u=m-e,d=l-n,f=Math.sqrt(u*u+d*d);if(f<a){let p=Math.floor(e+u*r*f),w=Math.floor(n+d*r*f),i=h*(w*c+p);o.push(t.data[i]),o.push(t.data[i+1]),o.push(t.data[i+2]),o.push(255)}else{let p=h*(l*c+m);o.push(t.data[p]),o.push(t.data[p+1]),o.push(t.data[p+2]),o.push(t.data[p+3])}}return new ImageData(new Uint8ClampedArray(o),t.width,t.height)},lt=(t,e,n)=>{let a=t.width,r=t.height,c=4,s=new Uint8ClampedArray(t.data);for(let h=e;h<r-e;h++)for(let o=e;o<a-e;o++){let l=[],m=[],u=[],d=[];for(let i=0;i<n;i++)l.push(0),m.push(0),u.push(0),d.push(0);for(let i=-e;i<=e;i++)for(let I=-e;I<=e;I++){let D=c*((h+i)*a+(o+I)),g=t.data[D+0],x=t.data[D+1],b=t.data[D+2],U=Math.floor((g+x+b)/3*n/255);l[U]++,m[U]+=g,u[U]+=x,d[U]+=b}let f=0,p=0;for(let i=0;i<n;i++)l[i]>f&&(f=l[i],p=i);let w=c*(h*a+o);s[w+0]=m[p]/f,s[w+1]=u[p]/f,s[w+2]=d[p]/f}return new ImageData(s,a,r)};export{k as add,ot as blahFilter,S as crop,E as dodge,W as embossFilter,rt as filmGrainFrilter,ct as fishEyeFilter,O as gaussianBlur,et as glowFilter,M as greyScale,st as gridFilter,ht as hatchFilter,B as invert,X as kodakChromeFilter,J as laplacianFilter,q as loadImage,A as numChannels,lt as painterlyFilter,T as polaroidfilter,Q as sepiaFilter,K as sobelFilter,V as technicolourfilter,tt as uniformBlur,Y as vintageFilter};
